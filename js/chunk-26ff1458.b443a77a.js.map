{"version":3,"sources":["webpack:///./node_modules/core-js/internals/string-repeat.js","webpack:///./src/views/bookInfo/index.vue?d9a8","webpack:///./src/api/book.js","webpack:///src/views/bookInfo/index.vue","webpack:///./src/views/bookInfo/index.vue?8e92","webpack:///./src/views/bookInfo/index.vue","webpack:///./src/views/bookInfo/index.vue?cbe7","webpack:///./node_modules/core-js/internals/this-number-value.js","webpack:///./node_modules/core-js/internals/parse-float.js","webpack:///./node_modules/core-js/modules/es.array.find.js","webpack:///./node_modules/core-js/modules/es.parse-float.js","webpack:///./node_modules/core-js/modules/es.number.to-fixed.js"],"names":["toInteger","requireObjectCoercible","module","exports","repeat","count","str","String","this","result","n","Infinity","RangeError","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","_f","data","cover","_v","_s","title","newScore","model","value","callback","$$v","rateValue","expression","starRatingCount","author","majorCate","wordCount","toFixed","updated","latelyFollower","retentionRatio","serializeWordCount","ref","on","$event","toggle","longIntro","_l","item","key","_id","toBookInfo","copyright","class","add","isAddBookshelf","remove","addToBookshelf","beginRead","staticRenderFns","fetchBookInfo","id","request","url","method","fetchRecommend","component","classof","TypeError","global","trim","whitespaces","nativeParseFloat","parseFloat","FORCED","string","trimmedString","charAt","$","$find","find","addToUnscopables","FIND","SKIPS_HOLES","Array","target","proto","forced","callbackfn","arguments","length","undefined","parseFloatImplementation","thisNumberValue","fails","nativeToFixed","floor","Math","pow","x","acc","log","x2","call","fractionDigits","e","z","j","k","number","fractDigits","sign","multiply","c","index","c2","divide","dataToString","s","t","slice"],"mappings":"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","file":"js/chunk-26ff1458.b443a77a.js","sourcesContent":["'use strict';\nvar toInteger = require('../internals/to-integer');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `String.prototype.repeat` method implementation\n// https://tc39.github.io/ecma262/#sec-string.prototype.repeat\nmodule.exports = ''.repeat || function repeat(count) {\n  var str = String(requireObjectCoercible(this));\n  var result = '';\n  var n = toInteger(count);\n  if (n < 0 || n == Infinity) throw RangeError('Wrong number of repetitions');\n  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) result += str;\n  return result;\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"book-info-wrap\"},[_c('div',{staticClass:\"book-info\"},[_c('div',{staticClass:\"book-msg\"},[_c('div',{staticClass:\"book-msg-top\"},[_c('div',[_c('img',{attrs:{\"src\":_vm._f(\"fixImg\")(_vm.data.cover)}})]),_c('div',{staticClass:\"right\"},[_c('div',[_c('h1',[_vm._v(_vm._s(_vm.data.title))])]),_c('div',{staticClass:\"rating\"},[_c('span',{staticClass:\"score\"},[_vm._v(_vm._s(_vm.newScore))]),_c('van-rate',{attrs:{\"readonly\":\"\",\"void-color\":\"#eee\",\"color\":\"#FF9900\",\"size\":15},model:{value:(_vm.rateValue),callback:function ($$v) {_vm.rateValue=$$v},expression:\"rateValue\"}}),_c('span',{staticClass:\"text\"},[_c('i',[_vm._v(\"|\")]),_vm._v(_vm._s(_vm.data.starRatingCount)+\"人评\")])],1),_c('div',{staticClass:\"author\"},[_c('span',[_vm._v(_vm._s(_vm.data.author))]),_c('i',[_vm._v(\"|\")]),_vm._v(_vm._s(_vm.data.majorCate)+\" \")]),_c('div',{staticClass:\"word\"},[_vm._v(\" \"+_vm._s((_vm.data.wordCount/10000).toFixed(1))+\"万字\"),_c('i',[_vm._v(\"|\")]),_vm._v(_vm._s(_vm._f(\"formatDate\")(_vm.data.updated))+\" \")])])]),_c('ul',{staticClass:\"book-msg-middle\"},[_c('li',[_c('p',{staticClass:\"num\"},[_vm._v(_vm._s(_vm.data.latelyFollower))]),_c('p',{staticClass:\"txt\"},[_vm._v(\"追书人气\")])]),_c('li',[_c('p',{staticClass:\"num\"},[_vm._v(_vm._s(_vm.data.retentionRatio))]),_c('p',{staticClass:\"txt\"},[_vm._v(\"读者留存\")])]),_c('li',[_c('p',{staticClass:\"num\"},[_vm._v(_vm._s(_vm.data.serializeWordCount))]),_c('p',{staticClass:\"txt\"},[_vm._v(\"日更字数\")])])]),_c('div',{staticClass:\"book-msg-bottom\"},[_c('div',{staticClass:\"title\"},[_c('span',[_vm._v(\"简介\")]),_c('van-icon',{ref:\"arrow\",attrs:{\"name\":\"arrow-down\"},on:{\"click\":function($event){return _vm.toggle()}}})],1),_c('p',{ref:\"intro\",staticClass:\"long-intro textOverflow3\"},[_vm._v(\" \"+_vm._s(_vm.data.longIntro)+\" \")])])]),_c('div',{staticClass:\"recommend\"},[_c('div',{staticClass:\"recommend-title\"},[_c('h2',[_vm._v(\"猜你喜欢\")]),_c('span',[_vm._v(\"查看更多\"),_c('van-icon',{attrs:{\"name\":\"arrow\"}})],1)]),_c('ul',{staticClass:\"clearfix\"},_vm._l((_vm.recommendBooks),function(item){return _c('li',{key:item._id,on:{\"click\":function($event){return _vm.toBookInfo(item._id)}}},[_c('div',[_c('img',{attrs:{\"src\":_vm._f(\"fixImg\")(item.cover)}})]),_c('h3',{staticClass:\"textOverflow1\"},[_vm._v(_vm._s(item.title))]),_c('p',[_vm._v(_vm._s(item.author))])])}),0)]),_c('div',{staticClass:\"book-copyright\"},[_c('h2',[_vm._v(\"图书信息\")]),_c('p',[_vm._v(_vm._s(_vm.data.copyright))])])]),_c('div',{staticClass:\"bottom-bar\"},[_c('div',{class:{add: !_vm.isAddBookshelf, remove: _vm.isAddBookshelf},on:{\"click\":_vm.addToBookshelf}},[_vm._v(_vm._s(this.isAddBookshelf?\"移出书架\":\"加入书架\"))]),_c('div',{staticClass:\"begin-read\",on:{\"click\":_vm.beginRead}},[_vm._v(\"开始阅读\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from '@/utils/request'\r\n\r\n// 获取书籍详情\r\nexport function fetchBookInfo(id) {\r\n    return request({\r\n      url: `/book-info/${id}`,\r\n      method: 'get'\r\n    })\r\n}\r\n\r\n// 获取书籍相关推荐\r\nexport function fetchRecommend(id) {\r\n    return request({\r\n      url: `/recommend/${id}`,\r\n      method: 'get'\r\n    })\r\n}\r\n","<template>\r\n<div class=\"book-info-wrap\">\r\n    <div class=\"book-info\">\r\n        <div class=\"book-msg\">\r\n            <div class=\"book-msg-top\">\r\n                <div>\r\n                    <img :src=\"data.cover | fixImg\" />\r\n                </div>\r\n                <div class=\"right\">\r\n                    <div>\r\n                        <h1>{{data.title}}</h1>\r\n                    </div>\r\n                    <div class=\"rating\">\r\n                        <span class=\"score\">{{newScore}}</span>\r\n                        <van-rate v-model=\"rateValue\" readonly void-color=\"#eee\" color=\"#FF9900\" :size=\"15\" />\r\n                        <span class=\"text\"><i>|</i>{{data.starRatingCount}}人评</span>\r\n                    </div>\r\n                    <div class=\"author\">\r\n                        <span>{{data.author}}</span><i>|</i>{{data.majorCate}}\r\n                    </div>\r\n                    <div class=\"word\">\r\n                        {{(data.wordCount/10000).toFixed(1)}}万字<i>|</i>{{ data.updated | formatDate }}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <ul class=\"book-msg-middle\">\r\n                <li>\r\n                    <p class=\"num\">{{data.latelyFollower}}</p>\r\n                    <p class=\"txt\">追书人气</p>\r\n                </li>\r\n                <li>\r\n                    <p class=\"num\">{{data.retentionRatio}}</p>\r\n                    <p class=\"txt\">读者留存</p>\r\n                </li>\r\n                <li>\r\n                    <p class=\"num\">{{data.serializeWordCount}}</p>\r\n                    <p class=\"txt\">日更字数</p>\r\n                </li>\r\n            </ul>\r\n            <div class=\"book-msg-bottom\">\r\n                <div class=\"title\">\r\n                    <span>简介</span><van-icon ref=\"arrow\" name=\"arrow-down\" @click=\"toggle()\" />\r\n                </div>\r\n                <p ref=\"intro\" class=\"long-intro textOverflow3\">\r\n                    {{data.longIntro}}\r\n                </p>\r\n            </div>\r\n        </div>\r\n        <div class=\"recommend\">\r\n            <div class=\"recommend-title\">\r\n                <h2>猜你喜欢</h2>\r\n                <span>查看更多<van-icon name=\"arrow\" /></span>\r\n            </div>\r\n            <ul class=\"clearfix\">\r\n                <li v-for=\"item in recommendBooks\" :key=\"item._id\" @click=\"toBookInfo(item._id)\">\r\n                    <div><img :src=\"item.cover | fixImg\" /></div>\r\n                    <h3 class=\"textOverflow1\">{{item.title}}</h3>\r\n                    <p>{{item.author}}</p>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n        <div class=\"book-copyright\">\r\n            <h2>图书信息</h2>\r\n            <p>{{data.copyright}}</p>\r\n        </div>\r\n    </div>\r\n    <div class=\"bottom-bar\">\r\n        <div :class=\"{add: !isAddBookshelf, remove: isAddBookshelf}\" @click=\"addToBookshelf\">{{this.isAddBookshelf?\"移出书架\":\"加入书架\"}}</div>\r\n        <div class=\"begin-read\" @click=\"beginRead\">开始阅读</div>\r\n    </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport { fetchBookInfo, fetchRecommend } from '@/api/book'\r\nimport { mapState, mapMutations } from 'vuex'\r\n\r\nexport default {\r\n    name: 'BookInfo',\r\n    data() {\r\n        return {\r\n            data: '',\r\n            recommendBooks: [],\r\n            bookmsg: {\r\n                cover: '',\r\n                title: '',\r\n                updated: '',\r\n                lastChapter: '',\r\n                id: ''\r\n            },\r\n            score: 0,\r\n            isAddBookshelf: false\r\n        }\r\n    },\r\n    computed: {\r\n        // 分数换算成星星数\r\n        rateValue() {\r\n            let val = this.score\r\n            let star = Math.floor(val / 2)\r\n            if((val%2) >= 1) {\r\n                return star+1\r\n            } else {\r\n                return star\r\n            }\r\n        },\r\n        newScore() {\r\n            return parseFloat(this.score).toFixed(1)\r\n        },\r\n        ...mapState([\r\n            'bookshelf'\r\n        ])\r\n    },\r\n    created () {\r\n        this.getBookInfo()\r\n        this.getRecommend()\r\n    },\r\n    methods: {\r\n        ...mapMutations([\r\n            'ADD_BOOKSHELF',\r\n            'Del_BOOKSHELF'\r\n        ]),\r\n        toggle() {\r\n            if(this.$refs.arrow.className === \"van-icon van-icon-arrow-down\") {\r\n                this.$refs.arrow.className = \"van-icon van-icon-arrow-up\"\r\n                this.$refs.intro.className = \"long-intro\"\r\n            } else if(this.$refs.arrow.className === \"van-icon van-icon-arrow-up\") {\r\n                this.$refs.arrow.className = \"van-icon van-icon-arrow-down\"\r\n                this.$refs.intro.className = \"long-intro textOverflow3\"\r\n            }\r\n        },\r\n        toBookInfo(id) {\r\n            this.$router.push({ name: 'BookInfo', params: { id: `${id}` }})\r\n        },\r\n        addToBookshelf() {\r\n            if(this.isAddBookshelf === false) {\r\n                this.ADD_BOOKSHELF(this.bookmsg)\r\n                this.isAddBookshelf = true\r\n            } else if (this.isAddBookshelf === true) {\r\n                this.Del_BOOKSHELF(this.bookmsg)\r\n                this.isAddBookshelf = false\r\n            }\r\n        },\r\n        beginRead() {\r\n            this.$dialog.alert({\r\n                message: '暂无书籍源'\r\n            });\r\n        },\r\n        getBookInfo() {\r\n            fetchBookInfo(this.$route.params.id).then(res => {\r\n                this.data = res.data\r\n                this.bookmsg.cover = res.data.cover\r\n                this.bookmsg.title = res.data.title\r\n                this.bookmsg.updated = res.data.updated\r\n                this.bookmsg.lastChapter = res.data.lastChapter\r\n                this.bookmsg.id = res.data._id\r\n                this.score = res.data.rating.score\r\n                if(this.bookshelf.find(obj => obj.id == res.data._id)) {\r\n                    this.isAddBookshelf = true\r\n                }\r\n            })\r\n        },\r\n        getRecommend() {\r\n            fetchRecommend(this.$route.params.id).then(res => {\r\n                this.recommendBooks = res.data.books.slice(0,6)\r\n            })\r\n        }\r\n    },\r\n    watch: {\r\n        '$route' () {\r\n            if(this.$route.params.id) {\r\n                this.getBookInfo()\r\n                this.getRecommend()\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.book-info-wrap {\r\n    position: relative;\r\n    .book-info {\r\n        padding: 10px;\r\n        .book-msg {\r\n            .book-msg-top {\r\n                display: flex;\r\n                justify-content: start;\r\n                img {\r\n                    width: 99px;\r\n                    height: 132px;\r\n                }\r\n                .right {\r\n                    padding-left: 10px;\r\n                    padding-top: 3px;\r\n                    h1 {\r\n                        font-size: 18px;\r\n                        font-weight: 700;\r\n                        color: #000;\r\n                    }\r\n                    .rating {\r\n                        margin-top: 20px;\r\n                        .score {\r\n                            font-size: 16px;\r\n                            color: #FF9900;\r\n                            padding-right: 10px;\r\n                            display: inline-block;\r\n                        }\r\n                        .text {\r\n                            color: #999;\r\n                            i {\r\n                                padding: 0 5px;  \r\n                                position: relative;\r\n                                top: -2px;\r\n                            }\r\n                        }\r\n                    }\r\n                    .author {\r\n                        padding: 10px 0;\r\n                        color: #999;\r\n                        span {\r\n                            color: red;\r\n                        }\r\n                        i {\r\n                            padding: 0 5px;\r\n                        }\r\n                    }\r\n                    .word {\r\n                        color: #999;\r\n                        i {\r\n                            padding: 0 5px;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            .book-msg-middle {\r\n                display: flex;\r\n                justify-content: space-between;\r\n                padding: 15px 30px;\r\n                li {\r\n                    width: 120px;\r\n                    text-align: center;\r\n                    .num {\r\n                        font-size: 16px;\r\n                        font-weight: 700;\r\n                        color: #666;\r\n                    }\r\n                    .txt {\r\n                        color: #999;\r\n                        padding: 10px 0;\r\n                    }\r\n                }\r\n            }\r\n            .book-msg-bottom {\r\n                .title {\r\n                    display: flex;\r\n                    justify-content: space-between;\r\n                    span {\r\n                        font-size: 18px;\r\n                        font-weight: 700;\r\n                        color: #000;\r\n                    }\r\n                }\r\n                .long-intro {\r\n                    padding-top: 20px;\r\n                    font-size: 14px;\r\n                    line-height: 20px;\r\n                }\r\n            }\r\n        }\r\n        .recommend {\r\n            margin-top: 30px;\r\n            .recommend-title {\r\n                display: flex;\r\n                justify-content: space-between;\r\n                padding: 10px 0;\r\n                h2 {\r\n                    font-size: 18px;\r\n                    font-weight: 700;\r\n                    color: #000;\r\n                }\r\n                span {\r\n                    color: #999;\r\n                }\r\n            }\r\n            ul {\r\n                padding: 10px 0;\r\n                li {\r\n                    float: left;\r\n                    padding-bottom: 10px;\r\n                    margin-right: 29px;\r\n                    &:nth-child(3n+0) {\r\n                        margin-right: 0;\r\n                    }\r\n                    img {\r\n                        width: 99px;\r\n                        height: 132px;\r\n                    }\r\n                    h3 {\r\n                        font-size: 14px;\r\n                        font-weight: 700;\r\n                        color: #000;\r\n                        padding: 10px 0;\r\n                        width: 99px;\r\n                    }\r\n                    p {\r\n                        font-size: 10px;\r\n                        color: #999;\r\n                        padding: 10px 0;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        .book-copyright {\r\n            padding-top: 20px;\r\n            h2 {\r\n                font-size: 18px;\r\n                font-weight: 700;\r\n                color: #000;\r\n            }\r\n            p {\r\n                padding-top: 10px;\r\n                padding-bottom: 50px;\r\n                font-weight: 700;\r\n                color: #666;\r\n            }\r\n        }\r\n    }\r\n    .bottom-bar {\r\n        border-top: 1px solid #ddd;\r\n        height: 50px;\r\n        position: fixed;\r\n        bottom: -1px;\r\n        z-index: 100;\r\n        width: calc(100% - 20px);\r\n        background-color: #fff;\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        padding: 0 10px;\r\n        div {\r\n            width: 150px;\r\n            height: 35px;\r\n            text-align: center;\r\n            line-height: 35px;\r\n            border-radius: 20px;\r\n            font-size: 14px;\r\n        }\r\n        .add {\r\n            background-color: #FFCCCC;\r\n            color: #FF6600;\r\n        }\r\n        .remove {\r\n            background-color: #999;\r\n            color: #eee;\r\n        }\r\n        .begin-read {\r\n            background-color: #FF0033;\r\n            color: #fff;\r\n        }\r\n    }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=6ce53dbe&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=6ce53dbe&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6ce53dbe\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=6ce53dbe&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=6ce53dbe&lang=scss&scoped=true&\"","var classof = require('../internals/classof-raw');\n\n// `thisNumberValue` abstract operation\n// https://tc39.github.io/ecma262/#sec-thisnumbervalue\nmodule.exports = function (value) {\n  if (typeof value != 'number' && classof(value) != 'Number') {\n    throw TypeError('Incorrect invocation');\n  }\n  return +value;\n};\n","var global = require('../internals/global');\nvar trim = require('../internals/string-trim').trim;\nvar whitespaces = require('../internals/whitespaces');\n\nvar nativeParseFloat = global.parseFloat;\nvar FORCED = 1 / nativeParseFloat(whitespaces + '-0') !== -Infinity;\n\n// `parseFloat` method\n// https://tc39.github.io/ecma262/#sec-parsefloat-string\nmodule.exports = FORCED ? function parseFloat(string) {\n  var trimmedString = trim(String(string));\n  var result = nativeParseFloat(trimmedString);\n  return result === 0 && trimmedString.charAt(0) == '-' ? -0 : result;\n} : nativeParseFloat;\n","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","var $ = require('../internals/export');\nvar parseFloatImplementation = require('../internals/parse-float');\n\n// `parseFloat` method\n// https://tc39.github.io/ecma262/#sec-parsefloat-string\n$({ global: true, forced: parseFloat != parseFloatImplementation }, {\n  parseFloat: parseFloatImplementation\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar toInteger = require('../internals/to-integer');\nvar thisNumberValue = require('../internals/this-number-value');\nvar repeat = require('../internals/string-repeat');\nvar fails = require('../internals/fails');\n\nvar nativeToFixed = 1.0.toFixed;\nvar floor = Math.floor;\n\nvar pow = function (x, n, acc) {\n  return n === 0 ? acc : n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc);\n};\n\nvar log = function (x) {\n  var n = 0;\n  var x2 = x;\n  while (x2 >= 4096) {\n    n += 12;\n    x2 /= 4096;\n  }\n  while (x2 >= 2) {\n    n += 1;\n    x2 /= 2;\n  } return n;\n};\n\nvar FORCED = nativeToFixed && (\n  0.00008.toFixed(3) !== '0.000' ||\n  0.9.toFixed(0) !== '1' ||\n  1.255.toFixed(2) !== '1.25' ||\n  1000000000000000128.0.toFixed(0) !== '1000000000000000128'\n) || !fails(function () {\n  // V8 ~ Android 4.3-\n  nativeToFixed.call({});\n});\n\n// `Number.prototype.toFixed` method\n// https://tc39.github.io/ecma262/#sec-number.prototype.tofixed\n$({ target: 'Number', proto: true, forced: FORCED }, {\n  // eslint-disable-next-line max-statements\n  toFixed: function toFixed(fractionDigits) {\n    var number = thisNumberValue(this);\n    var fractDigits = toInteger(fractionDigits);\n    var data = [0, 0, 0, 0, 0, 0];\n    var sign = '';\n    var result = '0';\n    var e, z, j, k;\n\n    var multiply = function (n, c) {\n      var index = -1;\n      var c2 = c;\n      while (++index < 6) {\n        c2 += n * data[index];\n        data[index] = c2 % 1e7;\n        c2 = floor(c2 / 1e7);\n      }\n    };\n\n    var divide = function (n) {\n      var index = 6;\n      var c = 0;\n      while (--index >= 0) {\n        c += data[index];\n        data[index] = floor(c / n);\n        c = (c % n) * 1e7;\n      }\n    };\n\n    var dataToString = function () {\n      var index = 6;\n      var s = '';\n      while (--index >= 0) {\n        if (s !== '' || index === 0 || data[index] !== 0) {\n          var t = String(data[index]);\n          s = s === '' ? t : s + repeat.call('0', 7 - t.length) + t;\n        }\n      } return s;\n    };\n\n    if (fractDigits < 0 || fractDigits > 20) throw RangeError('Incorrect fraction digits');\n    // eslint-disable-next-line no-self-compare\n    if (number != number) return 'NaN';\n    if (number <= -1e21 || number >= 1e21) return String(number);\n    if (number < 0) {\n      sign = '-';\n      number = -number;\n    }\n    if (number > 1e-21) {\n      e = log(number * pow(2, 69, 1)) - 69;\n      z = e < 0 ? number * pow(2, -e, 1) : number / pow(2, e, 1);\n      z *= 0x10000000000000;\n      e = 52 - e;\n      if (e > 0) {\n        multiply(0, z);\n        j = fractDigits;\n        while (j >= 7) {\n          multiply(1e7, 0);\n          j -= 7;\n        }\n        multiply(pow(10, j, 1), 0);\n        j = e - 1;\n        while (j >= 23) {\n          divide(1 << 23);\n          j -= 23;\n        }\n        divide(1 << j);\n        multiply(1, 1);\n        divide(2);\n        result = dataToString();\n      } else {\n        multiply(0, z);\n        multiply(1 << -e, 0);\n        result = dataToString() + repeat.call('0', fractDigits);\n      }\n    }\n    if (fractDigits > 0) {\n      k = result.length;\n      result = sign + (k <= fractDigits\n        ? '0.' + repeat.call('0', fractDigits - k) + result\n        : result.slice(0, k - fractDigits) + '.' + result.slice(k - fractDigits));\n    } else {\n      result = sign + result;\n    } return result;\n  }\n});\n"],"sourceRoot":""}