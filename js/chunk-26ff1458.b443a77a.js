(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26ff1458"],{1148:function(t,o,e){"use strict";var a=e("a691"),r=e("1d80");t.exports="".repeat||function(t){var o=String(r(this)),e="",i=a(t);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(o+=o))1&i&&(e+=o);return e}},1574:function(t,o,e){"use strict";e.r(o);var a=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"book-info-wrap"},[e("div",{staticClass:"book-info"},[e("div",{staticClass:"book-msg"},[e("div",{staticClass:"book-msg-top"},[e("div",[e("img",{attrs:{src:t._f("fixImg")(t.data.cover)}})]),e("div",{staticClass:"right"},[e("div",[e("h1",[t._v(t._s(t.data.title))])]),e("div",{staticClass:"rating"},[e("span",{staticClass:"score"},[t._v(t._s(t.newScore))]),e("van-rate",{attrs:{readonly:"","void-color":"#eee",color:"#FF9900",size:15},model:{value:t.rateValue,callback:function(o){t.rateValue=o},expression:"rateValue"}}),e("span",{staticClass:"text"},[e("i",[t._v("|")]),t._v(t._s(t.data.starRatingCount)+"人评")])],1),e("div",{staticClass:"author"},[e("span",[t._v(t._s(t.data.author))]),e("i",[t._v("|")]),t._v(t._s(t.data.majorCate)+" ")]),e("div",{staticClass:"word"},[t._v(" "+t._s((t.data.wordCount/1e4).toFixed(1))+"万字"),e("i",[t._v("|")]),t._v(t._s(t._f("formatDate")(t.data.updated))+" ")])])]),e("ul",{staticClass:"book-msg-middle"},[e("li",[e("p",{staticClass:"num"},[t._v(t._s(t.data.latelyFollower))]),e("p",{staticClass:"txt"},[t._v("追书人气")])]),e("li",[e("p",{staticClass:"num"},[t._v(t._s(t.data.retentionRatio))]),e("p",{staticClass:"txt"},[t._v("读者留存")])]),e("li",[e("p",{staticClass:"num"},[t._v(t._s(t.data.serializeWordCount))]),e("p",{staticClass:"txt"},[t._v("日更字数")])])]),e("div",{staticClass:"book-msg-bottom"},[e("div",{staticClass:"title"},[e("span",[t._v("简介")]),e("van-icon",{ref:"arrow",attrs:{name:"arrow-down"},on:{click:function(o){return t.toggle()}}})],1),e("p",{ref:"intro",staticClass:"long-intro textOverflow3"},[t._v(" "+t._s(t.data.longIntro)+" ")])])]),e("div",{staticClass:"recommend"},[e("div",{staticClass:"recommend-title"},[e("h2",[t._v("猜你喜欢")]),e("span",[t._v("查看更多"),e("van-icon",{attrs:{name:"arrow"}})],1)]),e("ul",{staticClass:"clearfix"},t._l(t.recommendBooks,(function(o){return e("li",{key:o._id,on:{click:function(e){return t.toBookInfo(o._id)}}},[e("div",[e("img",{attrs:{src:t._f("fixImg")(o.cover)}})]),e("h3",{staticClass:"textOverflow1"},[t._v(t._s(o.title))]),e("p",[t._v(t._s(o.author))])])})),0)]),e("div",{staticClass:"book-copyright"},[e("h2",[t._v("图书信息")]),e("p",[t._v(t._s(t.data.copyright))])])]),e("div",{staticClass:"bottom-bar"},[e("div",{class:{add:!t.isAddBookshelf,remove:t.isAddBookshelf},on:{click:t.addToBookshelf}},[t._v(t._s(this.isAddBookshelf?"移出书架":"加入书架"))]),e("div",{staticClass:"begin-read",on:{click:t.beginRead}},[t._v("开始阅读")])])])},r=[],i=(e("a4d3"),e("4de4"),e("7db0"),e("4160"),e("fb6a"),e("b680"),e("e439"),e("dbb4"),e("b64b"),e("acd8"),e("159b"),e("2fa7")),s=e("b775");function n(t){return Object(s["a"])({url:"/book-info/".concat(t),method:"get"})}function c(t){return Object(s["a"])({url:"/recommend/".concat(t),method:"get"})}var d=e("2f62");function l(t,o){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);o&&(a=a.filter((function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),e.push.apply(e,a)}return e}function f(t){for(var o=1;o<arguments.length;o++){var e=null!=arguments[o]?arguments[o]:{};o%2?l(e,!0).forEach((function(o){Object(i["a"])(t,o,e[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):l(e).forEach((function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(e,o))}))}return t}var u={name:"BookInfo",data:function(){return{data:"",recommendBooks:[],bookmsg:{cover:"",title:"",updated:"",lastChapter:"",id:""},score:0,isAddBookshelf:!1}},computed:f({rateValue:function(){var t=this.score,o=Math.floor(t/2);return t%2>=1?o+1:o},newScore:function(){return parseFloat(this.score).toFixed(1)}},Object(d["c"])(["bookshelf"])),created:function(){this.getBookInfo(),this.getRecommend()},methods:f({},Object(d["b"])(["ADD_BOOKSHELF","Del_BOOKSHELF"]),{toggle:function(){"van-icon van-icon-arrow-down"===this.$refs.arrow.className?(this.$refs.arrow.className="van-icon van-icon-arrow-up",this.$refs.intro.className="long-intro"):"van-icon van-icon-arrow-up"===this.$refs.arrow.className&&(this.$refs.arrow.className="van-icon van-icon-arrow-down",this.$refs.intro.className="long-intro textOverflow3")},toBookInfo:function(t){this.$router.push({name:"BookInfo",params:{id:"".concat(t)}})},addToBookshelf:function(){!1===this.isAddBookshelf?(this.ADD_BOOKSHELF(this.bookmsg),this.isAddBookshelf=!0):!0===this.isAddBookshelf&&(this.Del_BOOKSHELF(this.bookmsg),this.isAddBookshelf=!1)},beginRead:function(){this.$dialog.alert({message:"暂无书籍源"})},getBookInfo:function(){var t=this;n(this.$route.params.id).then((function(o){t.data=o.data,t.bookmsg.cover=o.data.cover,t.bookmsg.title=o.data.title,t.bookmsg.updated=o.data.updated,t.bookmsg.lastChapter=o.data.lastChapter,t.bookmsg.id=o.data._id,t.score=o.data.rating.score,t.bookshelf.find((function(t){return t.id==o.data._id}))&&(t.isAddBookshelf=!0)}))},getRecommend:function(){var t=this;c(this.$route.params.id).then((function(o){t.recommendBooks=o.data.books.slice(0,6)}))}}),watch:{$route:function(){this.$route.params.id&&(this.getBookInfo(),this.getRecommend())}}},v=u,h=(e("1c0e"),e("2877")),m=Object(h["a"])(v,a,r,!1,null,"6ce53dbe",null);o["default"]=m.exports},"1c0e":function(t,o,e){"use strict";var a=e("49b6"),r=e.n(a);r.a},"408a":function(t,o,e){var a=e("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=a(t))throw TypeError("Incorrect invocation");return+t}},"49b6":function(t,o,e){},"6fe5":function(t,o,e){var a=e("da84"),r=e("58a8").trim,i=e("5899"),s=a.parseFloat,n=1/s(i+"-0")!==-1/0;t.exports=n?function(t){var o=r(String(t)),e=s(o);return 0===e&&"-"==o.charAt(0)?-0:e}:s},"7db0":function(t,o,e){"use strict";var a=e("23e7"),r=e("b727").find,i=e("44d2"),s="find",n=!0;s in[]&&Array(1)[s]((function(){n=!1})),a({target:"Array",proto:!0,forced:n},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(s)},acd8:function(t,o,e){var a=e("23e7"),r=e("6fe5");a({global:!0,forced:parseFloat!=r},{parseFloat:r})},b680:function(t,o,e){"use strict";var a=e("23e7"),r=e("a691"),i=e("408a"),s=e("1148"),n=e("d039"),c=1..toFixed,d=Math.floor,l=function(t,o,e){return 0===o?e:o%2===1?l(t,o-1,e*t):l(t*t,o/2,e)},f=function(t){var o=0,e=t;while(e>=4096)o+=12,e/=4096;while(e>=2)o+=1,e/=2;return o},u=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n((function(){c.call({})}));a({target:"Number",proto:!0,forced:u},{toFixed:function(t){var o,e,a,n,c=i(this),u=r(t),v=[0,0,0,0,0,0],h="",m="0",b=function(t,o){var e=-1,a=o;while(++e<6)a+=t*v[e],v[e]=a%1e7,a=d(a/1e7)},p=function(t){var o=6,e=0;while(--o>=0)e+=v[o],v[o]=d(e/t),e=e%t*1e7},g=function(){var t=6,o="";while(--t>=0)if(""!==o||0===t||0!==v[t]){var e=String(v[t]);o=""===o?e:o+s.call("0",7-e.length)+e}return o};if(u<0||u>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(h="-",c=-c),c>1e-21)if(o=f(c*l(2,69,1))-69,e=o<0?c*l(2,-o,1):c/l(2,o,1),e*=4503599627370496,o=52-o,o>0){b(0,e),a=u;while(a>=7)b(1e7,0),a-=7;b(l(10,a,1),0),a=o-1;while(a>=23)p(1<<23),a-=23;p(1<<a),b(1,1),p(2),m=g()}else b(0,e),b(1<<-o,0),m=g()+s.call("0",u);return u>0?(n=m.length,m=h+(n<=u?"0."+s.call("0",u-n)+m:m.slice(0,n-u)+"."+m.slice(n-u))):m=h+m,m}})}}]);
//# sourceMappingURL=chunk-26ff1458.b443a77a.js.map