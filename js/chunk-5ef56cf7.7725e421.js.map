{"version":3,"sources":["webpack:///./src/views/searching/index.vue?673d","webpack:///src/views/searching/index.vue","webpack:///./src/views/searching/index.vue?b8b2","webpack:///./src/views/searching/index.vue","webpack:///./src/views/searching/index.vue?6e39","webpack:///./src/api/searching.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","onSearch","model","value","callback","$$v","expression","_v","changeBooks","_l","item","key","book","$event","toSearch","word","_s","delAllHistory","$store","state","staticRenderFns","component","fetchHotBooks","request","url","method","fetchSearchResult","keyword","params"],"mappings":"gJAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,OAAO,CAACG,MAAM,CAAC,OAAS,MAAM,CAACH,EAAG,aAAa,CAACG,MAAM,CAAC,YAAc,WAAWC,GAAG,CAAC,OAASR,EAAIS,UAAUC,MAAM,CAACC,MAAOX,EAAS,MAAEY,SAAS,SAAUC,GAAMb,EAAIW,MAAME,GAAKC,WAAW,YAAY,GAAGV,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,OAAO,CAACE,YAAY,SAAS,CAACN,EAAIe,GAAG,UAAUX,EAAG,OAAO,CAACE,YAAY,aAAaE,GAAG,CAAC,MAAQR,EAAIgB,cAAc,CAAChB,EAAIe,GAAG,QAAQX,EAAG,WAAW,CAACG,MAAM,CAAC,KAAO,aAAa,KAAKH,EAAG,KAAK,CAACE,YAAY,iBAAiBN,EAAIiB,GAAIjB,EAAgB,cAAE,SAASkB,GAAM,OAAOd,EAAG,KAAK,CAACe,IAAID,EAAKE,KAAKZ,GAAG,CAAC,MAAQ,SAASa,GAAQ,OAAOrB,EAAIsB,SAASJ,EAAKK,SAAS,CAACvB,EAAIe,GAAG,IAAIf,EAAIwB,GAAGN,EAAKK,MAAM,UAAS,KAAKnB,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,OAAO,CAACE,YAAY,SAAS,CAACN,EAAIe,GAAG,UAAUX,EAAG,OAAO,CAACE,YAAY,aAAaE,GAAG,CAAC,MAAQR,EAAIyB,gBAAgB,CAACzB,EAAIe,GAAG,SAASX,EAAG,WAAW,CAACG,MAAM,CAAC,KAAO,aAAa,KAAKH,EAAG,KAAK,CAACE,YAAY,QAAQN,EAAIiB,GAAIhB,KAAKyB,OAAOC,MAAmB,eAAE,SAAST,GAAM,OAAOd,EAAG,KAAK,CAACe,IAAID,EAAKV,GAAG,CAAC,MAAQ,SAASa,GAAQ,OAAOrB,EAAIsB,SAASJ,MAAS,CAAClB,EAAIe,GAAG,IAAIf,EAAIwB,GAAGN,GAAM,UAAS,QACnuCU,EAAkB,G,krBCoCtB,OACE,KAAF,YACE,KAFF,WAGI,MAAJ,CACM,MAAN,GACM,YAAN,KAGE,SAAF,CACI,aADJ,WAEM,OAAN,kDAGE,QAbF,WAcI,KAAJ,eAEE,QAAF,KACA,gBACA,oBACA,yBAHA,CAKI,SALJ,WAMM,KAAN,cAAQ,KAAR,gBAAQ,MAAR,CAAU,QAAV,yBACM,KAAN,+BAEI,SATJ,SASA,GACM,KAAN,cAAQ,KAAR,gBAAQ,MAAR,CAAU,QAAV,KACM,KAAN,sBAEI,cAbJ,WAcM,KAAN,wBAEI,YAhBJ,WAgBM,IAAN,OACM,OAAN,OAAM,GAAN,kBACQ,EAAR,mCAII,uBAtBJ,SAsBA,KACM,IAAI,IAAV,aAAU,EAAV,SAAU,EAAV,IACM,MAAN,OACQ,EAAR,gCACQ,EAAR,KACQ,EAAR,QACQ,EAAR,KAEM,OAAN,YAEI,YAhCJ,WAiCM,KAAN,kBCtF8V,I,wBCQ1VC,EAAY,eACd,EACA9B,EACA6B,GACA,EACA,KACA,WACA,MAIa,aAAAC,E,2CCnBf,yBAAujB,EAAG,G,kCCA1jB,oFAGO,SAASC,IACZ,OAAOC,eAAQ,CACbC,IAAK,aACLC,OAAQ,QAIP,SAASC,EAAkBC,GAC9B,OAAOJ,eAAQ,CACbC,IAAK,UACLC,OAAQ,MACRG,OAAQ,CAAED","file":"js/chunk-5ef56cf7.7725e421.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"searching\"},[_c('form',{attrs:{\"action\":\"/\"}},[_c('van-search',{attrs:{\"placeholder\":\"请输入搜索内容\"},on:{\"search\":_vm.onSearch},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1),_c('div',{staticClass:\"hotBooks\"},[_c('div',{staticClass:\"change\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"热门推荐\")]),_c('span',{staticClass:\"title-icon\",on:{\"click\":_vm.changeBooks}},[_vm._v(\"换一批 \"),_c('van-icon',{attrs:{\"name\":\"replay\"}})],1)]),_c('ul',{staticClass:\"list clearfix\"},_vm._l((_vm.newBookArray),function(item){return _c('li',{key:item.book,on:{\"click\":function($event){return _vm.toSearch(item.word)}}},[_vm._v(\" \"+_vm._s(item.word)+\" \")])}),0)]),_c('div',{staticClass:\"history\"},[_c('div',{staticClass:\"search-histoty\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"搜索历史\")]),_c('span',{staticClass:\"title-icon\",on:{\"click\":_vm.delAllHistory}},[_vm._v(\"删除历史 \"),_c('van-icon',{attrs:{\"name\":\"delete\"}})],1)]),_c('ul',{staticClass:\"list\"},_vm._l((this.$store.state.searchHistory),function(item){return _c('li',{key:item,on:{\"click\":function($event){return _vm.toSearch(item)}}},[_vm._v(\" \"+_vm._s(item)+\" \")])}),0)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"searching\">\r\n        <form action=\"/\">\r\n            <van-search\r\n                v-model=\"value\"\r\n                placeholder=\"请输入搜索内容\"\r\n                @search=\"onSearch\"\r\n            />\r\n        </form>\r\n        <div class=\"hotBooks\">\r\n            <div class=\"change\">\r\n                <span class=\"title\">热门推荐</span>\r\n                <span class=\"title-icon\" @click=\"changeBooks\">换一批 <van-icon name=\"replay\" /></span>\r\n            </div>\r\n            <ul class=\"list clearfix\">\r\n                <li v-for=\"item in newBookArray\" :key=\"item.book\" @click=\"toSearch(item.word)\">\r\n                    {{item.word}}\r\n                </li>\r\n            </ul>\r\n        </div>\r\n        <div class=\"history\">\r\n            <div class=\"search-histoty\">\r\n                <span class=\"title\">搜索历史</span>\r\n                <span class=\"title-icon\" @click=\"delAllHistory\">删除历史 <van-icon name=\"delete\" /></span>\r\n            </div>\r\n            <ul class=\"list\">\r\n                <li v-for=\"item in this.$store.state.searchHistory\" :key=\"item\" @click=\"toSearch(item)\">\r\n                    {{item}}\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { fetchHotBooks } from '@/api/searching'\r\nimport { mapMutations } from 'vuex'\r\nexport default {\r\n    name: 'Searching',\r\n    data() {\r\n        return {\r\n            value: '',\r\n            newHotWords: [],\r\n        }\r\n    },\r\n    computed: {\r\n        newBookArray() {\r\n            return this.getRandomArrayElements(this.newHotWords, 6)\r\n        }\r\n    },\r\n    created () {\r\n        this.getHotBooks()\r\n    },\r\n    methods: {\r\n        ...mapMutations([\r\n            'ADD_SEARCHHISTORY',\r\n            'DEL_ALLSEARCHHISTORY'\r\n        ]),\r\n        onSearch() {\r\n            this.$router.push({ path: '/searchResult', query: { keyword: `${this.value}` }})\r\n            this.ADD_SEARCHHISTORY(this.value)\r\n        },\r\n        toSearch(book) {\r\n            this.$router.push({ path: '/searchResult', query: { keyword: book }})\r\n            this.ADD_SEARCHHISTORY(book)\r\n        },\r\n        delAllHistory() {\r\n            this.DEL_ALLSEARCHHISTORY()\r\n        },\r\n        getHotBooks() {\r\n            fetchHotBooks().then(res => {\r\n                this.newHotWords = res.data.newHotWords\r\n            })\r\n        },\r\n        //从数组中随机选几个数\r\n        getRandomArrayElements(arr, count) {\r\n            let shuffled = arr.slice(0), i = arr.length, min = i - count, temp, index;\r\n            while (i-- > min) {\r\n                index = Math.floor((i + 1) * Math.random());\r\n                temp = shuffled[index];\r\n                shuffled[index] = shuffled[i];\r\n                shuffled[i] = temp;\r\n            }\r\n            return shuffled.slice(min);\r\n        },\r\n        changeBooks() {\r\n            this.getHotBooks()\r\n        }\r\n    },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.searching {\r\n    .hotBooks {\r\n        padding: 10px;\r\n        .change {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            .title {\r\n                font-size: 24px;\r\n                color: #6b6b6b;\r\n            }\r\n            .title-icon {\r\n                font-size: 12px;\r\n                color: #8a8a8f;\r\n            }\r\n        }\r\n        .list {\r\n            li {\r\n                padding: 10px;\r\n                border-radius: 15px;\r\n                background-color: #efeff4;\r\n                float: left;\r\n                margin: 10px 10px 0 0;\r\n                color: #9b9ba3;\r\n            }\r\n        }\r\n    }\r\n    .history {\r\n        margin-top: 20px;\r\n        padding: 10px;\r\n        .search-histoty {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            .title {\r\n                font-size: 24px;\r\n                color: #6b6b6b;\r\n            }\r\n            .title-icon {\r\n                font-size: 12px;\r\n                color: #8a8a8f;\r\n            }\r\n        }\r\n        .list {\r\n            margin-top:30px;\r\n            li {\r\n                border-bottom: 1px solid #ebebf0;\r\n                color: #9b9ba3;\r\n                padding: 10px 0;\r\n                font-size: 16px;\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=6280459a&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=6280459a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6280459a\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=6280459a&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=6280459a&lang=scss&scoped=true&\"","import request from '@/utils/request'\r\n\r\n// 热门搜索\r\nexport function fetchHotBooks() {\r\n    return request({\r\n      url: '/hot-books',\r\n      method: 'get'\r\n    })\r\n}\r\n// 获取搜索结果\r\nexport function fetchSearchResult(keyword) {\r\n    return request({\r\n      url: '/search',\r\n      method: 'get',\r\n      params: { keyword }\r\n    })\r\n}"],"sourceRoot":""}